<!DOCTYPE html>
<!--[if lt IE 7]>       <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>          <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>          <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <title>Savitzky Golay Filter - DataFil Documentation</title>
    <meta name="description" content="Full Documentation for the DataFil Project" />
    <meta name="author" content="Alexander Gubbay">
    <meta charset="UTF-8">
    <link rel="icon" href="../themes/daux/img/favicon-blue.png" type="image/x-icon">
    <!-- Mobile -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Font -->
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700&subset=latin,cyrillic-ext,cyrillic' rel='stylesheet' type='text/css'>
    <!-- CSS -->
    <link href='../themes/daux/css/theme-blue.min.css' rel='stylesheet' type='text/css'>
            <!-- Tipue Search -->
        <link href="../tipuesearch/tipuesearch.css" rel="stylesheet">
    
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body class="">
    
<header class="Navbar hidden-print">
    <a class="Navbar__brand" href="../index.html">DataFil Documentation</a>

    <div class="Search">
        <svg class="Search__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451 451"><path d="M447.05 428l-109.6-109.6c29.4-33.8 47.2-77.9 47.2-126.1C384.65 86.2 298.35 0 192.35 0 86.25 0 .05 86.3.05 192.3s86.3 192.3 192.3 192.3c48.2 0 92.3-17.8 126.1-47.2L428.05 447c2.6 2.6 6.1 4 9.5 4s6.9-1.3 9.5-4c5.2-5.2 5.2-13.8 0-19zM26.95 192.3c0-91.2 74.2-165.3 165.3-165.3 91.2 0 165.3 74.2 165.3 165.3s-74.1 165.4-165.3 165.4c-91.1 0-165.3-74.2-165.3-165.4z"/></svg>
        <input type="search" id="tipue_search_input" class="Search__field" placeholder="Search..." autocomplete="on" results=25 autosave=text_search>
    </div>
</header>
<div class="Columns content">
    <aside class="Columns__left Collapsible">
        <div class="Collapsible__container">
            <button type="button" class="Button Collapsible__trigger">
                <span class="Collapsible__trigger--bar"></span>
                <span class="Collapsible__trigger--bar"></span>
                <span class="Collapsible__trigger--bar"></span>
            </button>
        </div>

        <div class="Collapsible__content">
            <!-- Navigation -->
            <ul class='Nav'><li class='Nav__item '><a href="../index.html">DataFil Documentation</a></li><li class='Nav__item  has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Showcase App</a><ul class='Nav'><li class='Nav__item '><a href="../Showcase_App/How_to_Use_the_Showcase_App.html">How to Use the Showcase App</a></li><li class='Nav__item '><a href="../Showcase_App/Using_an_Apple_Watch_with_the_Showcase_App.html">Using an Apple Watch with the Showcase App</a></li></ul></li><li class='Nav__item  has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Sensor Data Flow Management Tools</a><ul class='Nav'><li class='Nav__item '><a href="../Sensor_Data_Flow_Management_Tools/Implementing_Apple_Watch_Sensor_Communication.html">Implementing Apple Watch Sensor Communication</a></li><li class='Nav__item '><a href="../Sensor_Data_Flow_Management_Tools/Using_the_Data_Source_Manager.html">Using the Data Source Manager</a></li><li class='Nav__item '><a href="../Sensor_Data_Flow_Management_Tools/Using_the_Filter_Manager.html">Using the Filter Manager</a></li></ul></li><li class='Nav__item  has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Filter Algorithm Implementation</a><ul class='Nav'><li class='Nav__item '><a href="../Filter_Algorithm_Implementation/accelPoint_Data_Object.html">accelPoint Data Object</a></li><li class='Nav__item '><a href="../Filter_Algorithm_Implementation/Filter_Implementation.html">Filter Implementation</a></li><li class='Nav__item '><a href="../Filter_Algorithm_Implementation/Filter_Protocol.html">Filter Protocol</a></li></ul></li><li class='Nav__item Nav__item--open has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Algorithm Specifications</a><ul class='Nav'><li class='Nav__item '><a href="../Algorithm_Specifications/Bounded_Average_Filter.html">Bounded Average Filter</a></li><li class='Nav__item '><a href="../Algorithm_Specifications/High_Pass_Filter.html">High Pass Filter</a></li><li class='Nav__item '><a href="../Algorithm_Specifications/Low_Pass_Filter.html">Low Pass Filter</a></li><li class='Nav__item Nav__item--active'><a href="../Algorithm_Specifications/Savitzky_Golay_Filter.html">Savitzky Golay Filter</a></li><li class='Nav__item '><a href="../Algorithm_Specifications/Total_Variation_Denoising_Filter.html">Total Variation Denoising Filter</a></li></ul></li><li class='Nav__item '><a href="../Library_Organisation.html">Library Organisation</a></li><li class='Nav__item '><a href="../Contents.html">Contents</a></li></ul>

            <div class="Links">
                
                                    <div class="CodeToggler">
                        <hr/>
                                                    <a class="CodeToggler__button CodeToggler__button--main" href="#">Show Code Blocks Inline</a><br>
                                            </div>
                
                            </div>
        </div>
    </aside>
    <div class="Columns__right ">
        <div class="Columns__right__content">
            <div class="doc_content">
                <article class="Page">

    <div class="Page__header">
        <h1><a href="../Algorithm_Specifications/Bounded_Average_Filter.html">Algorithm Specifications</a> <svg class="Page__header--separator" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 477.175 477.175"><path d="M360.73 229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1 0s-5.3 13.8 0 19.1l215.5 215.5-215.5 215.5c-5.3 5.3-5.3 13.8 0 19.1 2.6 2.6 6.1 4 9.5 4 3.4 0 6.9-1.3 9.5-4l225.1-225.1c5.3-5.2 5.3-13.8.1-19z"/></svg> <a href="../Algorithm_Specifications/Savitzky_Golay_Filter.html">Savitzky Golay Filter</a></h1>
                    </div>


    <div class="s-content">
        <h1 id="page_Introduction%2C+Usage+and+Behaviour">Introduction, Usage and Behaviour</h1>
<p>This filter is different from the previous three, in that it is non-casual. This means that it must consider both future and previous points when calculating the smoothing of the current point. This has advantages and drawbacks, the most obvious of which is that it introduces a delay proportional to the number of future points being considered.  The main advantage however is a more nuanced smoothing function that helps to maintain the amplitude and frequency of the input data, but is very effective at increasing the signal-to-noise ratio.
The filter functions through the use of convolution. Using linear algebra to apply a curve fitting of a second or forth degree polynomial to the data. The coefficients are calculated beforehand, by creating an imaginary curve with length n+1, where n is the number of the points to the left and right being considered. In this imaginary list, all points are set to zero apart from the centre, which is set to 1. The values of the polynomial curve that are created about this point become the coefficients that are applied to the raw data values at runtime.
<img src="https://github.com/ozliftoff/Accelerometer-Graph/blob/master/images/savgol1.jpg?raw=true" alt="Savitzky-Golay Application" /></p>
<p>The calculated coefficients are applied through the use a of a simple weighted moving average to the left and right of the point in consideration. This makes the filter computationally light at runtime.</p>
<p>Complexity:</p>
<ul>
<li>Coefficient Calculation: O((nl+nr)^m)  where <code>nl</code> = leftScan and <code>nr</code> = rightScan and <code>m</code> = polynomial order (2 or 4)</li>
<li>Filter application per point: O(nl+nr) where <code>nl</code> = leftScan and <code>nr</code> = rightScan</li>
</ul>
<p>Memory load:</p>
<ul>
<li>Coefficient Calculation: O((nl+nr)^m)  where <code>nl</code> = leftScan and <code>nr</code> = rightScan and <code>m</code> = polynomial order (2 or 4)</li>
<li>Filter application per point: O(nl+nr) where <code>nl</code> = leftScan and <code>nr</code> = rightScan</li>
</ul>
<h1 id="page_Parameters">Parameters</h1>
<table>
<thead>
<tr>
<th>Name and Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>leftScan:Double</code>  Range: 1...n</td>
<td>Defines the number of future,points that should be considered when calculating the current point. The larger this value, the larger the delay. A large difference between the left and right range can lead to anomalous behaviour. A forward scan value slightly larger than a backward scan value can reduce under and overshoot on sudden changes.</td>
</tr>
<tr>
<td><code>rightScan:Double</code>   Range: 1...n</td>
<td>Defines the number of historic points to be considered when calculating the current point. Does not affect delay. Does increase memory use. A higher value results in a smoother output.</td>
</tr>
<tr>
<td><code>filterPolynomial:Double</code>  (rightScan+leftScan+1)...n</td>
<td>The order of the polynomial used to calculate the coefficients. A higher order polynomial filter will respond better to high amplitude changes. Note that this value must be larger than (nr+nl+1) or no filtering will be applied. An error will be displayed in the console.</td>
</tr>
</tbody>
</table>
<p><img src="https://github.com/ozliftoff/Accelerometer-Graph/blob/master/images/savgol2.jpg?raw=true" alt="Savitzky-Golay Application" /></p>
<p>The above graphs are examples of a good and two bad configurations of this filter. The first above shows well how a properly calibrated filter will preserve the height and width of major movements in the data. The second displays anomalous changes on the descending and ascending leg of the major movement due to a low order being used with comparatively high numbers of points being considered. Lastly, the third shows a configuration where the polynomial is too low, and the number of points considered too high for the frequency of change present in the data. The height and width of the data is lost.</p>
<h1 id="page_Testing">Testing</h1>
<p>Tests for this filter can be found in the <code>savGolTests.swift</code> file</p>
    </div>

        <nav>
        <ul class="Pager">
            <li class=Pager--prev><a href="../Algorithm_Specifications/Low_Pass_Filter.html">Previous</a></li>            <li class=Pager--next><a href="../Algorithm_Specifications/Total_Variation_Denoising_Filter.html">Next</a></li>        </ul>
    </nav>
    </article>

            </div>
        </div>
    </div>
</div>

    
    <!-- jQuery -->
    <script src="../themes/daux/js/jquery-1.11.3.min.js"></script>

    <!-- hightlight.js -->
    <script src="../themes/daux/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- JS -->
    
    <script src="../themes/daux/js/daux.js"></script>

            <!-- Tipue Search -->
        <script type="text/javascript" src="../tipuesearch/tipuesearch.js"></script>

        <script>
            window.onunload = function(){}; // force $(document).ready to be called on back/forward navigation in firefox
            $(function() {
                tipuesearch({
                    'base_url': '../'
                });
            });
        </script>
    
</body>
</html>
