<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Using the Data Source Manager - DataFil Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Using the Data Source Manager";
    var mkdocs_page_input_path = "Using-the-Data-Source-Manager.md";
    var mkdocs_page_url = "/Using-the-Data-Source-Manager/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> DataFil Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Library-Organisation/">Library Organisation</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../How-to-Use-the-Showcase-App/">How to Use the Showcase App</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Using-An-Apple-Watch-With-the-Showcase-App/">Using An Apple Watch With the Showcase App</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Using the Data Source Manager</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#function-summary">Function Summary</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#initialiser">Initialiser</a></li>
        
            <li><a class="toctree-l3" href="#initalisedatasources">InitaliseDataSources</a></li>
        
            <li><a class="toctree-l3" href="#deinitdatasources">deinitDataSources</a></li>
        
            <li><a class="toctree-l3" href="#modifydatasources">modifyDataSources</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Using-the-Filter-Manager/">Using the Filter Manager</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Implementing-Apple-Watch-Sensor-Communication/">Implementing Apple Watch Sensor Communication</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../accelPoint-Data-Object/">accelPoint Data Object</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Filter-Implementation/">Filter Implementation</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Filter-Protocol/">Filter Protocol</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Bounded-Average-Filter/">Bounded Average Filter</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Savitzky-Golay-Filter/">Savitzky Golay Filter</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Low-Pass-Filter/">Low Pass Filter</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../High-Pass-Filter/">High Pass Filter</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../Total-Variation-Denoising-Filter/">Total Variation Denoising Filter</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../_Sidebar/">Index</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">DataFil Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Using the Data Source Manager</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>The <code>dataSourceManager</code> provides a tool to manage the sensor capabilities of the device. When enabled, it will create <code>accelPoint</code> objects that contain all the available sensor data, numbered sequentially. It can be instantiated on either an iOS or Watch OS device, and when running will post notifications under the name <code>newRawData</code>, that can be observed for globally that contain the latest <code>accelPoint</code> object. The <code>filterManager</code> class is set up by default to observe for these notifications for data to process.
To change sensor sample rate, a notification of the following format can be posted from anywhere in the application, where <code>sampleRate</code> is the double value of the desired rate:</p>
<pre><code>NotificationCenter.default.post(
    name: Notification.Name("newDatasourceSettings"), 
    object: nil, 
    userInfo:["sampleRate":sampleRate]
)
</code></pre>
<p>The function to extract the <code>accelPoint</code> would then be as follows:</p>
<p>@objc func newRawData(notification: NSNotification){
        let data = notification.userInfo as! Dictionary<String,accelPoint>
        let accelData = data["data"]
    }</p>
<h1 id="function-summary">Function Summary</h1>
<h3 id="initialiser">Initialiser</h3>
<p><code>init(sourceId: String)</code></p>
<p>The source ID will be printed alongside any debugging statements to identify the source of the message, to ease development when working with remote devices.</p>
<h3 id="initalisedatasources">InitaliseDataSources</h3>
<p><code>func initaliseDatasources()</code></p>
<p>When called, the <code>dataSourceManager</code> will attempt to startup all available sensors on the device. When ready, it will begin posting this data as <code>accelPoint</code> objects, in notifications under the name <code>newRawData</code>. As such, this data could be observed for using the following code:</p>
<pre><code>NotificationCenter.default.addObserver(self, selector: #selector(FilterManager.newRawData), name: Notification.Name("newRawData"), object: nil)
</code></pre>
<h3 id="deinitdatasources">deinitDataSources</h3>
<p><code>func deinitDatasources()</code></p>
<p>When called, the <code>dataSourceManager</code> will stop posting notifications with new raw data and will stop requesting sensor updates from the system. Should be used when data is no longer required to conserve power.</p>
<h3 id="modifydatasources">modifyDataSources</h3>
<p><code>func modifyDataSources(accel:Bool,gyro:Bool,mag:Bool)</code></p>
<p>Used to choose the active sensors. Unneeded sensors should be disabled using this method to conserve power. Placeholder 0 values will be used in the disabled sensor fields of posted <code>accelPoints</code></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Using-the-Filter-Manager/" class="btn btn-neutral float-right" title="Using the Filter Manager">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../Using-An-Apple-Watch-With-the-Showcase-App/" class="btn btn-neutral" title="Using An Apple Watch With the Showcase App"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../Using-An-Apple-Watch-With-the-Showcase-App/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../Using-the-Filter-Manager/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>

</body>
</html>
