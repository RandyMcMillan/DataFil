<!DOCTYPE html>
<!--[if lt IE 7]>       <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>          <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>          <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <title>Total Variation Denoising Filter - DataFil Documentation</title>
    <meta name="description" content="My Stylish Documentation" />
    <meta name="author" content="Alexander Gubbay">
    <meta charset="UTF-8">
    <link rel="icon" href="../themes/daux/img/favicon-blue.png" type="image/x-icon">
    <!-- Mobile -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Font -->
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700&subset=latin,cyrillic-ext,cyrillic' rel='stylesheet' type='text/css'>
    <!-- CSS -->
    <link href='../themes/daux/css/theme-blue.min.css' rel='stylesheet' type='text/css'>
            <!-- Tipue Search -->
        <link href="../tipuesearch/tipuesearch.css" rel="stylesheet">
    
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body class="">
    
<header class="Navbar hidden-print">
    <a class="Navbar__brand" href="../Home.html">DataFil Documentation</a>

    <div class="Search">
        <svg class="Search__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451 451"><path d="M447.05 428l-109.6-109.6c29.4-33.8 47.2-77.9 47.2-126.1C384.65 86.2 298.35 0 192.35 0 86.25 0 .05 86.3.05 192.3s86.3 192.3 192.3 192.3c48.2 0 92.3-17.8 126.1-47.2L428.05 447c2.6 2.6 6.1 4 9.5 4s6.9-1.3 9.5-4c5.2-5.2 5.2-13.8 0-19zM26.95 192.3c0-91.2 74.2-165.3 165.3-165.3 91.2 0 165.3 74.2 165.3 165.3s-74.1 165.4-165.3 165.4c-91.1 0-165.3-74.2-165.3-165.4z"/></svg>
        <input type="search" id="tipue_search_input" class="Search__field" placeholder="Search..." autocomplete="on" results=25 autosave=text_search>
    </div>
</header>
<div class="Columns content">
    <aside class="Columns__left Collapsible">
        <div class="Collapsible__container">
            <button type="button" class="Button Collapsible__trigger">
                <span class="Collapsible__trigger--bar"></span>
                <span class="Collapsible__trigger--bar"></span>
                <span class="Collapsible__trigger--bar"></span>
            </button>
        </div>

        <div class="Collapsible__content">
            <!-- Navigation -->
            <ul class='Nav'><li class='Nav__item '><a href="../Home.html">Home</a></li><li class='Nav__item  has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Showcase App</a><ul class='Nav'><li class='Nav__item '><a href="../Showcase_App/How_to_Use_the_Showcase_App.html">How to Use the Showcase App</a></li><li class='Nav__item '><a href="../Showcase_App/Using_an_Apple_Watch_with_the_Showcase_App.html">Using an Apple Watch with the Showcase App</a></li></ul></li><li class='Nav__item  has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Sensor Data Flow Management Tools</a><ul class='Nav'><li class='Nav__item '><a href="../Sensor_Data_Flow_Management_Tools/Implementing_Apple_Watch_Sensor_Communication.html">Implementing Apple Watch Sensor Communication</a></li><li class='Nav__item '><a href="../Sensor_Data_Flow_Management_Tools/Using_the_Data_Source_Manager.html">Using the Data Source Manager</a></li><li class='Nav__item '><a href="../Sensor_Data_Flow_Management_Tools/Using_the_Filter_Manager.html">Using the Filter Manager</a></li></ul></li><li class='Nav__item  has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Filter Algorithm Implementation</a><ul class='Nav'><li class='Nav__item '><a href="../Filter_Algorithm_Implementation/accelPoint_Data_Object.html">accelPoint Data Object</a></li><li class='Nav__item '><a href="../Filter_Algorithm_Implementation/Filter_Implementation.html">Filter Implementation</a></li><li class='Nav__item '><a href="../Filter_Algorithm_Implementation/Filter_Protocol.html">Filter Protocol</a></li></ul></li><li class='Nav__item Nav__item--open has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Algorithm Specifications</a><ul class='Nav'><li class='Nav__item '><a href="../Algorithm_Specifications/Bounded_Average_Filter.html">Bounded Average Filter</a></li><li class='Nav__item '><a href="../Algorithm_Specifications/High_Pass_Filter.html">High Pass Filter</a></li><li class='Nav__item '><a href="../Algorithm_Specifications/Low_Pass_Filter.html">Low Pass Filter</a></li><li class='Nav__item '><a href="../Algorithm_Specifications/Savitzky_Golay_Filter.html">Savitzky Golay Filter</a></li><li class='Nav__item Nav__item--active'><a href="../Algorithm_Specifications/Total_Variation_Denoising_Filter.html">Total Variation Denoising Filter</a></li></ul></li><li class='Nav__item '><a href="../Library_Organisation.html">Library Organisation</a></li><li class='Nav__item '><a href="../Contents.html">Contents</a></li></ul>

            <div class="Links">
                
                                    <div class="CodeToggler">
                        <hr/>
                                                    <a class="CodeToggler__button CodeToggler__button--main" href="#">Show Code Blocks Inline</a><br>
                                            </div>
                
                            </div>
        </div>
    </aside>
    <div class="Columns__right ">
        <div class="Columns__right__content">
            <div class="doc_content">
                <article class="Page">

    <div class="Page__header">
        <h1><a href="../Algorithm_Specifications/Bounded_Average_Filter.html">Algorithm Specifications</a> <svg class="Page__header--separator" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 477.175 477.175"><path d="M360.73 229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1 0s-5.3 13.8 0 19.1l215.5 215.5-215.5 215.5c-5.3 5.3-5.3 13.8 0 19.1 2.6 2.6 6.1 4 9.5 4 3.4 0 6.9-1.3 9.5-4l225.1-225.1c5.3-5.2 5.3-13.8.1-19z"/></svg> <a href="../Algorithm_Specifications/Total_Variation_Denoising_Filter.html">Total Variation Denoising Filter</a></h1>
                    </div>


    <div class="s-content">
        <h1 id="page_Introduction%2C+Usage+and+Behaviour">Introduction, Usage and Behaviour</h1>
<p>This is yet another style of filter that is better suited to batch processing of data. This means that if for example you are recording data and not using it in real time, this filter can be used to yield an extremely clean signal, by passing in all the data at once. For the purposes of the live demo, the data points are batched together in a buffer and processed in groups of size 10 to 1000. The larger the batch size, the longer the lag, but the more consistent the output data.
This filter is an implementation of the total variation denoising method proposed in “Laurent Condat. A Direct Algorithm for 1D Total Variation Denoising. 2013.” Broadly, the filter operates by creating a value that it tries to preserve for as long as possible, as it moves through the data. For as long as it can do this, the generated value is set as the output at that point. If it cannot preserve, it backtracks to a point where a new value can be generated, set it as the new point to preserve and continues. (Condat, 2013). More information on the detailed operation can be found in the paper mentioned above. The output of this filter is a flat value, with instant jumps to new values, similar in style to the output of the bounded average filter.
The filter only considers values looking forward from its current position in the dataset, meaning that memory usage is minimal. It also means however that the output is sensitive to the size of the input dataset. Therefore, the maximum allowable dataset size should be passed in. This filter can be combined with low pass filter to great effect. The clean output of the total variation filter is combined with the smoothing effect of the low pass algorithm to create a clean, smooth signal that responds quickly and decisively to change, making the combination ideal for applications such as games where specific movements are triggered by accelerometer events.</p>
<p>Complexity:</p>
<ul>
<li>Filter application: O(n^2) where <code>n</code> = number of points in the input dataset.
Memory load:</li>
<li>Coefficient Calculation: O(n^2) where <code>n</code> = number of points in the input dataset.</li>
</ul>
<p>Information on the complexity of this algorithm is provided in the paper discussed above. (Condat, 2013)
When using this filter in the showcase app, the graph may appear to freeze. This is normal behaviour, and the graph will update with new values as they are batch processed. This effect can be reduced by selecting a smaller batch size. The live raw data can be viewed by tapping settings and then unchecking Single Raw &amp; Filtered Graph. The bottom graph will update in jumps as new processed data becomes available.</p>
<h1 id="page_Parameters">Parameters</h1>
<p>| Name and Type                   	| Description                                                                                                                                                                                                                                                                                                                                                                                        	||
|---------------------------------	|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------	||
| <code>lambda:Double</code>  Range: 0.01...1  	| Defines the sensitivity of the filter to changes in value. The larger the lambda value, the larger change in acceleration is required to trigger an update of the output value. It also causes instantaneous jumps to be larger when they occur. This should be tested to a value that is above the level of noise in your data but below the magnitude of changes that are considered meaningful. 	| 	||
| <code>bufferSize:Double</code>  Range: 1...n 	| Defines the size of the batch to be processed at once. When using the filter for real-time applications this will define the delay. For efficiency and output data consistency, the largest acceptable value should be used.                                                                                                                                                                       	|	||</p>
<p><img src="https://github.com/ozliftoff/Accelerometer-Graph/blob/master/images/tvd.jpg?raw=true" alt="Total Variation Dnoising" /></p>
<p>The sample graphs above show some of the characteristic behaviour of the total variation denoising filter. The first displays clearly how the overall movement in the data is isolated by removing extreme peaks and troughs. It also shows the flat tops at the maxima and minima of the data, characteristic of this algorithm. The middle is included to clearly display the way in which the filter behaves with sudden changes. It can be seen that a single instantaneous jump was made from the old signal value to the new. The effect of selecting a smaller batch size can be seen in the last image. Compared to the first, the processed data more closely resembles the raw data, and the flat tops at maxima and minima are smaller and less clear.</p>
<h1 id="page_Testing">Testing</h1>
<p>Tests for this filter can be found in the <code>totalVarTests.swift</code> file</p>
    </div>

        <nav>
        <ul class="Pager">
            <li class=Pager--prev><a href="../Algorithm_Specifications/Savitzky_Golay_Filter.html">Previous</a></li>            <li class=Pager--next><a href="../Library_Organisation.html">Next</a></li>        </ul>
    </nav>
    </article>

            </div>
        </div>
    </div>
</div>

    
    <!-- jQuery -->
    <script src="../themes/daux/js/jquery-1.11.3.min.js"></script>

    <!-- hightlight.js -->
    <script src="../themes/daux/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- JS -->
    
    <script src="../themes/daux/js/daux.js"></script>

            <!-- Tipue Search -->
        <script type="text/javascript" src="../tipuesearch/tipuesearch.js"></script>

        <script>
            window.onunload = function(){}; // force $(document).ready to be called on back/forward navigation in firefox
            $(function() {
                tipuesearch({
                    'base_url': '../'
                });
            });
        </script>
    
</body>
</html>
