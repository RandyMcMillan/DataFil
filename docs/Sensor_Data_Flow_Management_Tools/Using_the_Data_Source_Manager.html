<!DOCTYPE html>
<!--[if lt IE 7]>       <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>          <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>          <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <title>Using the Data Source Manager - DataFil Documentation</title>
    <meta name="description" content="My Stylish Documentation" />
    <meta name="author" content="Alexander Gubbay">
    <meta charset="UTF-8">
    <link rel="icon" href="../themes/daux/img/favicon-blue.png" type="image/x-icon">
    <!-- Mobile -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Font -->
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700&subset=latin,cyrillic-ext,cyrillic' rel='stylesheet' type='text/css'>
    <!-- CSS -->
    <link href='../themes/daux/css/theme-blue.min.css' rel='stylesheet' type='text/css'>
            <!-- Tipue Search -->
        <link href="../tipuesearch/tipuesearch.css" rel="stylesheet">
    
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body class="">
    
<header class="Navbar hidden-print">
    <a class="Navbar__brand" href="../Home.html">DataFil Documentation</a>

    <div class="Search">
        <svg class="Search__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451 451"><path d="M447.05 428l-109.6-109.6c29.4-33.8 47.2-77.9 47.2-126.1C384.65 86.2 298.35 0 192.35 0 86.25 0 .05 86.3.05 192.3s86.3 192.3 192.3 192.3c48.2 0 92.3-17.8 126.1-47.2L428.05 447c2.6 2.6 6.1 4 9.5 4s6.9-1.3 9.5-4c5.2-5.2 5.2-13.8 0-19zM26.95 192.3c0-91.2 74.2-165.3 165.3-165.3 91.2 0 165.3 74.2 165.3 165.3s-74.1 165.4-165.3 165.4c-91.1 0-165.3-74.2-165.3-165.4z"/></svg>
        <input type="search" id="tipue_search_input" class="Search__field" placeholder="Search..." autocomplete="on" results=25 autosave=text_search>
    </div>
</header>
<div class="Columns content">
    <aside class="Columns__left Collapsible">
        <div class="Collapsible__container">
            <button type="button" class="Button Collapsible__trigger">
                <span class="Collapsible__trigger--bar"></span>
                <span class="Collapsible__trigger--bar"></span>
                <span class="Collapsible__trigger--bar"></span>
            </button>
        </div>

        <div class="Collapsible__content">
            <!-- Navigation -->
            <ul class='Nav'><li class='Nav__item '><a href="../Home.html">Home</a></li><li class='Nav__item  has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Showcase App</a><ul class='Nav'><li class='Nav__item '><a href="../Showcase_App/How_to_Use_the_Showcase_App.html">How to Use the Showcase App</a></li><li class='Nav__item '><a href="../Showcase_App/Using_an_Apple_Watch_with_the_Showcase_App.html">Using an Apple Watch with the Showcase App</a></li></ul></li><li class='Nav__item Nav__item--open has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Sensor Data Flow Management Tools</a><ul class='Nav'><li class='Nav__item '><a href="../Sensor_Data_Flow_Management_Tools/Implementing_Apple_Watch_Sensor_Communication.html">Implementing Apple Watch Sensor Communication</a></li><li class='Nav__item Nav__item--active'><a href="../Sensor_Data_Flow_Management_Tools/Using_the_Data_Source_Manager.html">Using the Data Source Manager</a></li><li class='Nav__item '><a href="../Sensor_Data_Flow_Management_Tools/Using_the_Filter_Manager.html">Using the Filter Manager</a></li></ul></li><li class='Nav__item  has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Filter Algorithm Implementation</a><ul class='Nav'><li class='Nav__item '><a href="../Filter_Algorithm_Implementation/accelPoint_Data_Object.html">accelPoint Data Object</a></li><li class='Nav__item '><a href="../Filter_Algorithm_Implementation/Filter_Implementation.html">Filter Implementation</a></li><li class='Nav__item '><a href="../Filter_Algorithm_Implementation/Filter_Protocol.html">Filter Protocol</a></li></ul></li><li class='Nav__item  has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Algorithm Specifications</a><ul class='Nav'><li class='Nav__item '><a href="../Algorithm_Specifications/Bounded_Average_Filter.html">Bounded Average Filter</a></li><li class='Nav__item '><a href="../Algorithm_Specifications/High_Pass_Filter.html">High Pass Filter</a></li><li class='Nav__item '><a href="../Algorithm_Specifications/Low_Pass_Filter.html">Low Pass Filter</a></li><li class='Nav__item '><a href="../Algorithm_Specifications/Savitzky_Golay_Filter.html">Savitzky Golay Filter</a></li><li class='Nav__item '><a href="../Algorithm_Specifications/Total_Variation_Denoising_Filter.html">Total Variation Denoising Filter</a></li></ul></li><li class='Nav__item '><a href="../Library_Organisation.html">Library Organisation</a></li><li class='Nav__item '><a href="../Contents.html">Contents</a></li></ul>

            <div class="Links">
                
                                    <div class="CodeToggler">
                        <hr/>
                                                    <a class="CodeToggler__button CodeToggler__button--main" href="#">Show Code Blocks Inline</a><br>
                                            </div>
                
                            </div>
        </div>
    </aside>
    <div class="Columns__right ">
        <div class="Columns__right__content">
            <div class="doc_content">
                <article class="Page">

    <div class="Page__header">
        <h1><a href="../Sensor_Data_Flow_Management_Tools/Implementing_Apple_Watch_Sensor_Communication.html">Sensor Data Flow Management Tools</a> <svg class="Page__header--separator" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 477.175 477.175"><path d="M360.73 229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1 0s-5.3 13.8 0 19.1l215.5 215.5-215.5 215.5c-5.3 5.3-5.3 13.8 0 19.1 2.6 2.6 6.1 4 9.5 4 3.4 0 6.9-1.3 9.5-4l225.1-225.1c5.3-5.2 5.3-13.8.1-19z"/></svg> <a href="../Sensor_Data_Flow_Management_Tools/Using_the_Data_Source_Manager.html">Using the Data Source Manager</a></h1>
                    </div>


    <div class="s-content">
        <p>The <code>dataSourceManager</code> provides a tool to manage the sensor capabilities of the device. When enabled, it will create <code>accelPoint</code> objects that contain all the available sensor data, numbered sequentially. It can be instantiated on either an iOS or Watch OS device, and when running will post notifications under the name <code>newRawData</code>, that can be observed for globally that contain the latest <code>accelPoint</code> object. The <code>filterManager</code> class is set up by default to observe for these notifications for data to process.
To change sensor sample rate, a notification of the following format can be posted from anywhere in the application, where <code>sampleRate</code> is the double value of the desired rate:</p>
<pre><code>NotificationCenter.default.post(
    name: Notification.Name(&quot;newDatasourceSettings&quot;), 
    object: nil, 
    userInfo:[&quot;sampleRate&quot;:sampleRate]
)
</code></pre>
<p>The function to extract the <code>accelPoint</code> would then be as follows:</p>
<pre><code>@objc func newRawData(notification: NSNotification){
    let data = notification.userInfo as! Dictionary&lt;String,accelPoint&gt;
    let accelData = data[&quot;data&quot;]
}
</code></pre>
<h1 id="page_Function+Summary">Function Summary</h1>
<h3 id="page_Initialiser">Initialiser</h3>
<p><code>init(sourceId: String)</code></p>
<p>The source ID will be printed alongside any debugging statements to identify the source of the message, to ease development when working with remote devices.</p>
<h3 id="page_InitaliseDataSources">InitaliseDataSources</h3>
<p><code>func initaliseDatasources()</code></p>
<p>When called, the <code>dataSourceManager</code> will attempt to startup all available sensors on the device. When ready, it will begin posting this data as <code>accelPoint</code> objects, in notifications under the name <code>newRawData</code>. As such, this data could be observed for using the following code:</p>
<pre><code>NotificationCenter.default.addObserver(self, 
   selector: #selector(FilterManager.newRawData), 
   name: Notification.Name(&quot;newRawData&quot;), 
   object: nil)
</code></pre>
<h3 id="page_deinitDataSources">deinitDataSources</h3>
<p><code>func deinitDatasources()</code></p>
<p>When called, the <code>dataSourceManager</code> will stop posting notifications with new raw data and will stop requesting sensor updates from the system. Should be used when data is no longer required to conserve power.</p>
<h3 id="page_modifyDataSources">modifyDataSources</h3>
<p><code>func modifyDataSources(accel:Bool,gyro:Bool,mag:Bool)</code></p>
<p>Used to choose the active sensors. Unneeded sensors should be disabled using this method to conserve power. Placeholder 0 values will be used in the disabled sensor fields of posted <code>accelPoints</code></p>
    </div>

        <nav>
        <ul class="Pager">
            <li class=Pager--prev><a href="../Sensor_Data_Flow_Management_Tools/Implementing_Apple_Watch_Sensor_Communication.html">Previous</a></li>            <li class=Pager--next><a href="../Sensor_Data_Flow_Management_Tools/Using_the_Filter_Manager.html">Next</a></li>        </ul>
    </nav>
    </article>

            </div>
        </div>
    </div>
</div>

    
    <!-- jQuery -->
    <script src="../themes/daux/js/jquery-1.11.3.min.js"></script>

    <!-- hightlight.js -->
    <script src="../themes/daux/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- JS -->
    
    <script src="../themes/daux/js/daux.js"></script>

            <!-- Tipue Search -->
        <script type="text/javascript" src="../tipuesearch/tipuesearch.js"></script>

        <script>
            window.onunload = function(){}; // force $(document).ready to be called on back/forward navigation in firefox
            $(function() {
                tipuesearch({
                    'base_url': '../'
                });
            });
        </script>
    
</body>
</html>
